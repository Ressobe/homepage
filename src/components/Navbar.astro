---
import { REPO_URL } from "../config";
import ThemeToggleButton from "./ThemeToggleButton";
import DropDownMenuToggle from "./DropDownMenuToggle";

const currentPath = new URL(Astro.request.url).pathname;
---

<script is:inline>
  const theme = (() => {
    if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
      return localStorage.getItem("theme");
    }
    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
      return "dark";
    }
    return "light";
  })();

  if (theme === "light") {
    document.documentElement.classList.remove("dark");
  } else {
    document.documentElement.classList.add("dark");
  }
</script>

<nav
  class="h-18 p-4 sticky top-0 w-full border-b-2 border-b-orange-300 bg-orange-100 dark:bg-zinc-800 dark:border-b-zinc-600 backdrop-blur-sm z-20"
>
  <div class="hidden md:block align-middle">
    <ul
      class="flex w-full justify-center content-center h-10 items-center gap-12 tracking-wide"
    >
      <li>
        <a
          href="/"
          class:list={[
            "hover:underline",
            "hover:opacity-70",
            currentPath === "/" ? "font-bold" : "",
          ]}>About me</a
        >
      </li>

      <li>
        <a
          href="/works"
          class:list={[
            "hover:underline",
            "hover:opacity-70",
            currentPath === "/works" ? "font-bold" : "",
          ]}>Works</a
        >
      </li>

      <li>
        <a
          href="/posts"
          class:list={[
            "hover:underline",
            "hover:opacity-70",
            currentPath === "/posts" ? "font-bold" : "",
          ]}>Posts</a
        >
      </li>

      <li>
        <img
          class="w-7 h-7 inline-block mr-2"
          src="/github.svg"
          alt="github icon"
        />
        <a
          href={REPO_URL}
          target="_blank"
          class="hover:underline hover:opacity-70"
        >
          Source Code
        </a>
      </li>
      <ThemeToggleButton client:load />
    </ul>
  </div>

  <div class="md:hidden">
    <li
      class="flex w-full justify-end content-center h-10 items-center gap-8 tracking-wide"
    >
      <ThemeToggleButton client:load />
      <DropDownMenuToggle client:load />
    </li>
  </div>
</nav>
